{"version":3,"sources":["utils.js","App.js","index.js"],"names":["deepClone","obj","clone","Object","assign","keys","forEach","key","res","Array","isArray","length","from","findMember","tree","arguments","undefined","selector","members","split","currentNode","children","name","find","ele","familyTree","attributes","Age","Gender","Fav Color","hello","App","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onNodeClick","node","e","console","log","addChild","parent","child","nextData","state","data","targetMember","concat","toConsumableArray","setState","removeChild","filter","member","position","x","y","dimensions","treeContainer","getBoundingClientRect","width","_this2","_this$state","_this$state$data","_this$state$position","react_default","a","createElement","className","id","style","height","ref","dom","react_d3_tree_min_default","translate","orientation","onClick","nodeSize","allowForeignObjects","nodeLabelComponent","render","App_NodeLabel","foreignObjectWrapper","React","Component","NodeLabel","onAddChild","stopPropagation","nodeData","_this3","props","age","onRemove","_this$props","_nodeData$attributes","_children","_nodeData$name","map","value","PureComponent","ReactDOM","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.22267aeb.chunk.js","sourcesContent":["export const deepClone = obj => {\n  const clone = Object.assign({}, obj);\n  Object.keys(clone).forEach(key => {\n    clone[key] = typeof obj[key] === 'object' ? deepClone(obj[key]) : obj[key];\n  });\n  let res = clone;\n  if (Array.isArray(obj)) {\n    res = (clone.length = obj.length) && Array.from(clone);\n  }\n  return res;\n};\n\nexport const isEmpty = val => val == null || !(Object.keys(val) || val).length;\n","import React from 'react';\nimport Tree from 'react-d3-tree';\nimport './App.css';\nimport { NAME, AGE, TEXT, MALE, FEMALE } from './constants';\nimport { deepClone, isEmpty } from './utils';\n\nconst fields = {\n  name: {\n    label: 'Name',\n    type: 'text',\n    validation: value => NAME.test(value),\n  },\n  age: {\n    label: 'Age',\n    type: 'number',\n    validation: value => AGE.test(value),\n  },\n  gender: {\n    label: 'Gender',\n    type: 'select',\n    validation: value => [MALE, FEMALE].includes(value),\n  },\n  color: {\n    label: 'Fav Color',\n    type: 'text',\n    validation: value => TEXT.test(value),\n  },\n};\n\nconst findMember = (tree = [], selector) => {\n  if (!selector) return tree[0];\n\n  const members = selector.split('.');\n  let currentNode = { children: tree };\n  members.forEach(name => {\n    currentNode = (currentNode.children || []).find(ele => ele.name === name);\n  });\n  return currentNode;\n};\n\nconst familyTree = [\n  {\n    name: 'Ramesh',\n    key: 'Ramesh',\n    attributes: {\n      Age: 60,\n      Gender: 'Male',\n      'Fav Color': 'Green',\n    },\n    children: [\n      {\n        name: 'Suresh',\n        key: 'Ramesh.Suresh',\n        attributes: {\n          Age: 30,\n          Gender: 'Male',\n          'Fav Color': 'Blue',\n        },\n      },\n      {\n        name: 'Jitesh',\n        key: 'Ramesh.Jitesh',\n        children: [\n          {\n            name: 'Rakesh',\n            key: 'Ramesh.Jitesh.Rakesh',\n            attributes: {\n              Age: 2,\n              Gender: 'Female',\n              hello: undefined,\n            },\n          },\n        ],\n      },\n    ],\n  },\n];\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      data: familyTree,\n      position: { x: 0, y: 0 },\n    };\n  }\n\n  componentDidMount() {\n    // Get treeContainer's dimensions so we can center the tree\n    const dimensions = this.treeContainer.getBoundingClientRect();\n    this.setState({\n      position: {\n        x: dimensions.width / 2,\n        y: 100,\n        // y: dimensions.height / 2,\n      },\n    });\n  }\n\n  onNodeClick = (node, e) => {\n    console.log(node);\n    console.log(e);\n  };\n\n  addChild = (parent, child) => {\n    const nextData = deepClone(this.state.data);\n    const targetMember = findMember(nextData, parent.key);\n    targetMember.children = [...(targetMember.children || []), child];\n\n    // console.log('after adding a child', nextData);\n    this.setState({\n      data: nextData,\n    });\n  };\n\n  removeChild = child => {\n    const nextData = deepClone(this.state.data);\n    const targetMember = findMember(nextData, child.parent.key);\n    targetMember.children = targetMember.children.filter(\n      member => member.key !== child.key,\n    );\n\n    // console.log('after removing a child', nextData);\n    this.setState({\n      data: nextData,\n    });\n  };\n\n  render() {\n    const { data = [], position = {} } = this.state;\n\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">Family Tree</header>\n        <div\n          id=\"treeWrapper\"\n          style={{ width: '100vw', height: '100vh' }}\n          ref={dom => (this.treeContainer = dom)}\n        >\n          <Tree\n            data={data}\n            translate={position}\n            orientation={'vertical'}\n            onClick={this.onNodeClick}\n            nodeSize={{ x: 150, y: 170 }}\n            // collapsible={false}\n            allowForeignObjects\n            nodeLabelComponent={{\n              render: (\n                <NodeLabel\n                  className=\"node-wrapper\"\n                  addChild={this.addChild}\n                  removeChild={this.removeChild}\n                />\n              ),\n              foreignObjectWrapper: {\n                x: -10,\n                y: -30,\n              },\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nclass NodeLabel extends React.PureComponent {\n  onAddChild = e => {\n    e && e.stopPropagation();\n    const { nodeData } = this.props;\n    // console.log('Add Child to', nodeData, e);\n    // Open dialog and take the Name and other values.\n    const child = {\n      name: 'Hello',\n      key: `${nodeData.key}.Hello`,\n      attributes: { age: 23 },\n    };\n    this.props.addChild(nodeData, child);\n  };\n\n  onRemove = e => {\n    e && e.stopPropagation();\n    const { nodeData } = this.props;\n    // console.log('Remove Child', this.props, nodeData, e);\n\n    this.props.removeChild(nodeData);\n  };\n\n  render() {\n    const { className, nodeData } = this.props;\n    const { attributes = {}, _children: children, name = '' } = nodeData;\n\n    return (\n      <div className={`${className} ${children ? 'parent' : 'leaf'}`}>\n        <h3>{name}</h3>\n        <div className=\"attr-wrapper\">\n          {Object.keys(attributes).map(key => {\n            const value = attributes[key] || '';\n            if (!value) return null;\n\n            return (\n              <div className=\"attr-row\" key={value}>\n                <span className=\"label\">{key}</span>:&nbsp;\n                <span className=\"value\">{value}</span>\n              </div>\n            );\n          })}\n        </div>\n\n        <button onClick={this.onAddChild}>Add Child</button>\n        {!children && <button onClick={this.onRemove}>Remove</button>}\n      </div>\n    );\n  }\n}\n\nexport default App;\n\n// Add child with dialog\n// Organize and Cleanup code (Check naming)\n// Styling fix\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}